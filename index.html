<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Micro Tab Loader (20:9)</title>

<style>
body {
    margin: 0;
    background: #020617;
    color: #e5e7eb;
    font-family: Arial, sans-serif;
}

/* Top control bar */
.controls {
    padding: 10px;
    background: #020617;
    position: sticky;
    top: 0;
    z-index: 10;
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    align-items: center;
}

input, button {
    padding: 6px;
    border-radius: 6px;
    border: none;
    font-size: 13px;
}

button {
    background: #2563eb;
    color: white;
    cursor: pointer;
}

/* Grid for 100+ micro tabs */
.grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 6px;
    padding: 6px;
}

/* 20:9 aspect ratio micro tab */
.micro {
    position: relative;
    width: 100%;
    aspect-ratio: 20 / 9;
    background: black;
    border-radius: 6px;
    overflow: hidden;
    border: 1px solid #1e293b;
}

.micro iframe {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    border: none;
}
</style>
</head>

<body>

<div class="controls">
    URL:
    <input id="url" placeholder="https://example.com" size="24">
    Views:
    <input id="count" type="number" value="100" min="1" style="width:70px">
    Reload (sec):
    <input id="interval" type="number" value="30" min="1" style="width:70px">
    <button onclick="start()">START</button>
</div>

<div id="container" class="grid"></div>

<script>
let reloadTimer = null;
let baseUrl = "";

function start() {
    baseUrl = document.getElementById("url").value.trim();
    const count = parseInt(document.getElementById("count").value);
    const interval = parseInt(document.getElementById("interval").value) * 1000;
    const container = document.getElementById("container");

    if (!baseUrl || count < 1 || interval < 1000) {
        alert("Enter valid values");
        return;
    }

    container.innerHTML = "";
    clearInterval(reloadTimer);

    const finalUrl = normalizeUrl(baseUrl);

    for (let i = 0; i < count; i++) {
        const wrap = document.createElement("div");
        wrap.className = "micro";

        const iframe = document.createElement("iframe");
        iframe.loading = "lazy";
        iframe.allow =
            "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
        iframe.allowFullscreen = true;
        iframe.referrerPolicy = "no-referrer";
        iframe.src = buildUrl(finalUrl);

        wrap.appendChild(iframe);
        container.appendChild(wrap);
    }

    reloadTimer = setInterval(() => {
        document.querySelectorAll("iframe").forEach(f => {
            f.src = buildUrl(finalUrl);
        });
    }, interval);
}

/* üîÅ Convert YouTube links to embed */
function normalizeUrl(url) {
    try {
        const u = new URL(url);

        // youtube.com/watch?v=ID
        if (u.hostname.includes("youtube.com") && u.searchParams.get("v")) {
            return "https://www.youtube.com/embed/" + u.searchParams.get("v");
        }

        // youtu.be/ID
        if (u.hostname.includes("youtu.be")) {
            return "https://www.youtube.com/embed" + u.pathname;
        }

        return url;
    } catch {
        return url;
    }
}

/* üîÑ Force reload */
function buildUrl(url) {
    const sep = url.includes("?") ? "&" : "?";
    return url + sep + "reload=" + Date.now();
}
</script>

</body>
</html>            try {
                if (tab.closed) return;
                const currentOrigin = new URL(tab.location.href).origin;
                if (currentOrigin !== lockedOrigin) {
                    tab.location.href = lockedURL;
                } else {
                    tab.location.reload();
                }
            } catch {
                // Cross-origin error ‚Üí force back to locked URL
                try { tab.location.href = lockedURL; } catch {}
            }
        });
    }, reloadSec * 1000);
}
</script>

</body>
</html>
